O:10:"feedParser":7:{s:9:"feed_type";s:8:"atom 1.0";s:5:"title";s:20:"Blog Dotclear - News";s:4:"link";s:29:"https://fr.dotclear.org/blog/";s:11:"description";s:33:"Prenez le contrôle de votre blog";s:7:"pubdate";s:25:"2019-03-29T09:34:50+01:00";s:9:"generator";s:8:"Dotclear";s:5:"items";a:20:{i:0;O:8:"stdClass":8:{s:4:"link";s:80:"https://fr.dotclear.org/blog/post/2019/01/15/Serveur-DotAddict-op%C3%A9rationnel";s:5:"title";s:31:"Serveur DotAddict opérationnel";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:481:"    <p>Un grand merci collectif à Noé (aka Lomalarch) qui a configuré et restauré sur un nouveau serveur ce qui restait de l'ancien qui nous a lâchement abandonné à la veille du nouvel an&nbsp;!</p>


<p>Vous pouvez donc profiter comme il vous plait des <a href="http://themes.dotaddict.org/">thèmes</a> et <a href="http://plugins.dotaddict.org/">plugins</a>, <a href="http://tips.dotaddict.org/">astuces</a>, et autres <a href="http://dotaddict.org/">geekeries</a> \o/</p>";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2019-01-15T10:13:00+01:00";s:2:"TS";i:1547543580;}i:1;O:8:"stdClass":8:{s:4:"link";s:71:"https://fr.dotclear.org/blog/post/2018/12/26/Serveur-DotAddict-en-panne";s:5:"title";s:26:"Serveur DotAddict en panne";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:757:"    <p>Bonjour,</p>


<p>Le serveur DotAddict, qui gère les plugins et thèmes des contributeurs, plus quelques autres ressources, a décidé de mourir sans prévenir pendant les agapes de Noël&nbsp;!</p>


<p>On va remettre de l'ordre dans tout ça, aussi vite que possible, mais ça risque de prendre du temps, voire même un temps certain.</p>


<p>Merci pour votre patience…</p>


<p>PS&nbsp;: La non réponse de ce serveur peut ralentir votre tableau de bord, si vous avez l'icône «&nbsp;Gestion des plugins&nbsp;» et/ou «&nbsp;Apparence du blog&nbsp;» dans vos favoris. Si vous trouvez ça trop gênant, vous pouvez les retirer le temps que ça revienne en ligne (voir «&nbsp;Mes préférences », onglet «&nbsp;Mon tableau de bord »).</p>";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2018-12-26T13:17:00+01:00";s:2:"TS";i:1545826620;}i:2;O:8:"stdClass":8:{s:4:"link";s:60:"https://fr.dotclear.org/blog/post/2018/09/26/Dotclear-2.14.3";s:5:"title";s:15:"Dotclear 2.14.3";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:217:"    <p>Une petite mise à jour qui devrait régler le problème de configuration rencontré entre autres chez 1&amp;1 avec une valeur de <code>memory_limit</code> (dans le PHP.ini) initialisée à -1 (illimitée).</p>";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2018-09-26T11:24:00+02:00";s:2:"TS";i:1537953840;}i:3;O:8:"stdClass":8:{s:4:"link";s:60:"https://fr.dotclear.org/blog/post/2018/09/04/Dotclear-2.14.2";s:5:"title";s:15:"Dotclear 2.14.2";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:560:"    <p>Une petite mise à jour qui règle quelques problèmes avec&nbsp;:</p>

<ul>
<li>La sécurité (deux failles mineures)</li>
<li>L'utilisation de la coloration syntaxique dans l'éditeur de thème</li>
<li>La gestion de certaines balises template (entre autres celles utilisées pour l'entête des pages)</li>
</ul>

<p>Note&nbsp;: Certains bloqueurs de pub de votre navigateur peuvent empêcher le bon fonctionnement de l'administration, en particulier le ou les éditeurs. Pensez dans ce cas à utiliser la liste blanche de l'extension en question.</p>";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2018-09-04T15:24:00+02:00";s:2:"TS";i:1536067440;}i:4;O:8:"stdClass":8:{s:4:"link";s:60:"https://fr.dotclear.org/blog/post/2018/08/17/Dotclear-2.14.1";s:5:"title";s:15:"Dotclear 2.14.1";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:246:"    <p>Une petite mise à jour qui règle quelques problèmes avec&nbsp;:</p>

<ul>
<li>Le script d'installation</li>
<li>La taille de police par défaut dans les préférences utilisateur</li>
<li>La compression des scripts Javascript</li>
</ul>";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2018-08-17T09:41:00+02:00";s:2:"TS";i:1534491660;}i:5;O:8:"stdClass":8:{s:4:"link";s:76:"https://fr.dotclear.org/blog/post/2018/08/14/Dotclear-2.14-et-version-de-PHP";s:5:"title";s:31:"Dotclear 2.14 et version de PHP";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:270:"    <p>On m'a rapporté à plusieurs reprises des problèmes de connexion avec l'admin sur les hébergements tournant avec une version 5.5 (obsolète) de PHP.</p>


<p>Je vous recommande donc de basculer vers la version 5.6 ou encore mieux vers la version 7.1 ou 7.2</p>";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2018-08-14T09:58:00+02:00";s:2:"TS";i:1534233480;}i:6;O:8:"stdClass":8:{s:4:"link";s:58:"https://fr.dotclear.org/blog/post/2018/08/13/Dotclear-2.14";s:5:"title";s:13:"Dotclear 2.14";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:503:"    <p>Nom de code&nbsp;: <strong>Dark Crystal</strong></p>


<p><strong>Crystal</strong> parce que noces de, vu que ça fait 15 ans aujourd'hui que Dotclear tourne sur les meilleurs serveurs de blogs de la planète&nbsp;!</p>


<p><strong>Dark</strong> parce qu'il y a, depuis cette version, un mode sombre pour l'interface d'administration&nbsp;!</p>


<p><strong>Dark Crystal</strong> parce que j'aime bien ce film sorti il y a 35 ans :-)</p>


<p>Sinon, c'est comme d'habitude…</p>


<p>Enjoy!</p>";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2018-08-13T10:06:00+02:00";s:2:"TS";i:1534147560;}i:7;O:8:"stdClass":8:{s:4:"link";s:60:"https://fr.dotclear.org/blog/post/2018/01/27/Dotclear-2.13.1";s:5:"title";s:15:"Dotclear 2.13.1";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:200:"    <p>Une petite mise à jour qui corrige deux bugs agaçants dans l'éditeur de thème (lorsque la coloration syntaxique est activée) et avec l'éditeur traditionnel de Dotclear, en mode XHTML.</p>";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2018-01-27T07:47:00+01:00";s:2:"TS";i:1517035620;}i:8;O:8:"stdClass":8:{s:4:"link";s:58:"https://fr.dotclear.org/blog/post/2018/01/13/Dotclear-2.13";s:5:"title";s:13:"Dotclear 2.13";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:2353:"    <p>Quelques mots&nbsp;:</p>

<ul>
<li><strong>PHP 5.5+ devient obligatoire</strong> comme un nouveau système plus sécurisé a été implémenté pour le stockage des mots de passe dans la base de données, système qui nécessite a minima cette version de PHP</li>
<li>Les informations affichées sur le tableau de bord, comme les mises à jour de Dotclear ou les nouvelles, le sont dorénavant de manière <strong>asynchrone</strong>, donc plus de blocage inhérent à un serveur parfois fantôme&nbsp;!</li>
<li>Un nouveau <em>driver</em> pour les bases de données MySQL encodées avec <strong>UTF8-mb4</strong></li>
<li>Quelques bugs corrigés</li>
<li>Quelques améliorations de l'expérience utilisateur côté administration des blogs</li>
</ul>

<p>Profitez&nbsp;!</p>


<hr />


<h3>Note pour les utilisateurs et administrateurs&nbsp;:</h3>


<p>Le nouveau système de chiffrement des mots de passe <strong>ne nécessite aucune procédure</strong> de migration. Ceci sera fait au fur et à mesure à la première connexion de chacun des utilisateurs.</p>


<h3>Notes pour les développeurs&nbsp;:</h3>


<p>Le nouveau système des mots de passe implique deux incompatibilités par rapport aux versions précédentes&nbsp;:</p>

<ol>
<li>La fonction/méthode <strong>checkPassword()</strong> (/inc/core/class.dc.auth.php) requiert dorénavant un <strong>mot de passe non chiffré</strong> (habituellement le contenu du champ de formulaire) plutôt que la forme déjà chiffrée.<br />Vous devez donc maintenant l'utiliser de cette façon&nbsp;: <code>$core-&gt;auth-&gt;checkPassword($_POST['your_pwd'])</code> plutôt que celle-ci&nbsp;: <code>$core-&gt;auth-&gt;checkPassword($core-&gt;auth-&gt;crypt($_POST['your_pwd']))</code>.<br /><br /></li>
<li>La fonction/méthode <strong>crypt()</strong> (/inc/core/class.dc.auth.php) ne donne maintenant plus deux fois de suite le même résultat pour le même paramètre. Si vous avez besoin d'un chiffrement à l'ancienne mode vous pouvez utiliser la fonction/méthode <strong>cryptLegacy()</strong> (même fichier).</li>
</ol>

<p>Si vous avez besoin d'un <strong>UID/clé unique</strong>, utilisez <code>http::browserUID(DC_MASTER_KEY.$core-&gt;auth-&gt;userID().$core-&gt;auth-&gt;cryptLegacy($core-&gt;auth-&gt;userID()))</code> (sera peut-être sujet à amélioration dans le futur).</p>";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2018-01-13T12:08:00+01:00";s:2:"TS";i:1515841680;}i:9;O:8:"stdClass":8:{s:4:"link";s:60:"https://fr.dotclear.org/blog/post/2017/08/13/Dotclear-2.12.1";s:5:"title";s:15:"Dotclear 2.12.1";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:651:"    <p>Une nouvelle petite mise à jour aujourd'hui qui corrige un bug qui touche ceux qui utilisent un thème basé sur le jeu de template (par défaut) mustek. Elle règle aussi un petit problème avec les titres de certains médias au moment de leur envoi dans la médiathèque.</p>


<p>N'oubliez pas de vider le cache des templates (plugin Entretien) ainsi que le cache de votre navigateur après avoir fait une mise à jour. Dans le cas où vous auriez opté pour une mise à jour manuelle, n'oubliez pas non plus de vous déconnecter et de vous reconnecter, certaines mises à jour (concernant la base de données) se font à ce moment là.</p>";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2017-08-13T04:47:00+02:00";s:2:"TS";i:1502592420;}i:10;O:8:"stdClass":8:{s:4:"link";s:58:"https://fr.dotclear.org/blog/post/2017/07/27/Dotclear-2.12";s:5:"title";s:13:"Dotclear 2.12";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:1809:"    <p>Mise à jour minimaliste, bien que le <a href="https://hg.dotclear.org/dotclear/rev/91681075f2d0">CHANGELOG</a> ne soit pas si ridicule que ça, vu qu'il n'y aucune fonctionnalité supplémentaire, simplement des améliorations et des corrections de bug.</p>


<p>Vu l'état des troupes depuis de nombreux mois, voire de nombreuses années, j'ai décidé de réduire la voilure en terme de développement car étant seul pour coder je n'ai pas le courage de me lancer dans des projets conséquents<sup>[<a href="https://fr.dotclear.org/blog/post/2017/07/27/Dotclear-2.12#pnote-1064-1" id="rev-pnote-1064-1">1</a>]</sup> — oui, on a un <em><a href="https://en.wikipedia.org/wiki/Bus_factor" hreflang="en">bus factor</a></em> de 1 chez Dotclear.</p>


<p>Exit donc l'API REST que j'avais en tête — cela dit un plugin tiers est en cours de développement qui devrait apporter cette fonctionnalité —, exit aussi l'intégration du moteur Twig pour les thèmes, exit aussi pas mal de <a href="https://dev.dotclear.org/2.0/report/1">tickets</a> qui restaient en souffrance faute de bras pour les prendre en charge.</p>


<p>Je vais continuer à maintenir Dotclear, ajouter quelques petites choses qui manquent, comme le support des bases de données MySQL UTF8-MB4, une gestion des mots de passe un peu plus robuste, et ça fera l'objet d'une prochaine 2.13 qui au passage nécessitera <strong>PHP 5.5</strong> minimum — il est grand temps de laisser tomber PHP 5.3 vieillissant et plus du tout maintenu.</p>
<div class="footnotes"><h4 class="footnotes-title">Note</h4>
<p>[<a href="https://fr.dotclear.org/blog/post/2017/07/27/Dotclear-2.12#rev-pnote-1064-1" id="pnote-1064-1">1</a>] D'une part c'est pas drôle de coder seul, d'autre part ça manque de revue de code et c'est dangereux.</p></div>
";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2017-07-27T10:25:00+02:00";s:2:"TS";i:1501143900;}i:11;O:8:"stdClass":8:{s:4:"link";s:60:"https://fr.dotclear.org/blog/post/2016/12/29/Dotclear-2.11.2";s:5:"title";s:15:"Dotclear 2.11.2";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:586:"    <p>Une nouvelle petite mise à jour aujourd'hui qui corrige quelques bugs gênants avec PHP 5.3 et PHP 5.4&nbsp;; elle règle également le problème de prévisualisation des billets et pages en cours d'édition.</p>


<p>N'oubliez pas de vider le cache des templates (plugin Entretien) ainsi que le cache de votre navigateur après avoir fait une mise à jour. Dans le cas où vous auriez opté pour une mise à jour manuelle, n'oubliez pas non plus de vous déconnecter et de vous reconnecter, certaines mises à jour (concernant la base de données) se font à ce moment là.</p>";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2016-12-29T15:29:00+01:00";s:2:"TS";i:1483021740;}i:12;O:8:"stdClass":8:{s:4:"link";s:60:"https://fr.dotclear.org/blog/post/2016/12/28/Dotclear-2.11.1";s:5:"title";s:15:"Dotclear 2.11.1";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:278:"    <p>Une petite mise à jour qui corrige un problème passé inaperçu lorsqu'on utilise une version de PHP antérieure à 5.5.</p>


<p>Ce problème empêche l'affichage du menu d'administration (colonne de gauche) avec la plupart des plugins, voire empêche leur accès.</p>";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2016-12-28T14:20:00+01:00";s:2:"TS";i:1482931200;}i:13;O:8:"stdClass":8:{s:4:"link";s:58:"https://fr.dotclear.org/blog/post/2016/12/28/Dotclear-2.11";s:5:"title";s:13:"Dotclear 2.11";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:6361:"    <p>Une nouvelle version qui déroge à nos habitudes, vu qu'elle n'est pas publiée un <strong>13</strong>, et en avance par rapport au planning, vu qu'elle était prévue <strong>mi-février 2017</strong>. Elle déroge aussi avec l'habitude d'avoir un copieux <a href="https://hg.dotclear.org/dotclear/rev/712559193a6e" hreflang="en">CHANGELOG</a> (liste des modifications/corrections).</p>


<p>En effet, cette version n'apporte rien d'extraordinaire sauf qu'elle facilite à pas mal d'endroits, l'utilisation de Dotclear, et elle corrige quelques bugs parfois gênants au quotidien&nbsp;:</p>

<ul>
<li>Accès plus facile aux réglages des plugins,</li>
<li>une personnalisation un peu plus poussée (taille des textes, affichage ou pas d'information complémentaires, …),</li>
<li>quelques attributs supplémentaires pour les développeurs/bidouilleurs de thèmes,</li>
<li>les <a href="https://www.w3.org/TR/webmention/" hreflang="en">webmentions</a> qui viennent s'ajouter aux existants rétroliens (trackbacks) et <a href="https://en.wikipedia.org/wiki/Pingback" hreflang="en">pingbacks</a>,</li>
<li>le thème <strong>Berlin</strong> s'appuie maintenant sur le jeu de template <strong>dotty</strong>, qui exploite au mieux <strong>HTML5</strong>,</li>
<li>…</li>
</ul>

<p>L'aspect général de l'administration change également parce qu'avec la 2.11, on utilise dorénavant la police système disponible sur votre machine plutôt que l'Helvetica Neue habituelle. Elle change aussi parce qu'elle met en œuvre une taille de police qui s'adapte, entre deux seuils, à la place disponible sur votre écran. Vous pourrez modifier la taille générale de la police dans vos préférences (3 réglages sont proposés).</p>


<p>À noter qu'on a laissé tomber le support des vieux navigateurs, en particulier toutes les versions d'Internet Explorer à un chiffre, soit jusqu'à la version 9 incluse&nbsp;; ça permet d'utiliser un peu plus facilement quelques nouveautés de CSS 3, en particulier le système <a href="https://developer.mozilla.org/fr/docs/Web/CSS/Disposition_des_bo%C3%AEtes_flexibles_CSS/Utilisation_des_flexbox_en_CSS">flex</a> pour l'agencement des blocs dans une zone.</p>


<p>Mais je vous laisse découvrir ça chez vous, une fois que vous aurez fait l'attendue mise-à-jour&nbsp;!</p>


<p>PS&nbsp;: Cette version nécessite <strong>PHP 5.3</strong> a minima, mais je ne saurais trop vous conseiller de passer à <strong>PHP 5.6</strong> voire <strong>PHP 7</strong> sans attendre — cette dernière offre un gain de vitesse très appréciable. Il est très possible que la version suivante de Dotclear nécessite une version plus récente que la déjà obsolète 5.3.</p>


<hr />


<p>Quelques détails techniques pour les développeurs de plugins et les administrateurs de blog&nbsp;:</p>


<h3>Réglages et paramètres des plugins</h3>


<p>La nouvelle version 2.11 introduit un nouveau système qui permet de définir et de trouver les différents endroits où un plugin peut être paramétré.</p>


<h4>Définitions</h4>


<p>Il faut définir dans le fichier _define.php du plugin une propriété supplémentaire, nommée settings et qui se construit de la façon suivante&nbsp;:</p>

<pre>
'settings' =&gt; array(
    'self'  =&gt; '',
    'blog'  =&gt; '#params.id',
    'pref'  =&gt; '#user-options.id'
)
</pre>


<p>La ligne avec ‘self’ permet d’indiquer qu’il y a des réglages sur la page principale du plugin (c’est-à-dire pour les développeurs, dans le fichier index.php).</p>


<p>La ligne avec ‘blog’ permet d’indiquer qu’il y a des réglages dans les paramètres du blog, normalement sur l’onglet «&nbsp;Paramètres&nbsp;» (le #params sert à ça) et que le premier élément concernant le plugin a un identifiant égal à id (on peut par exemple positionner cet id sur l’élément de titre, h4 ou h5, qui précède les options du plugin).</p>


<p>La ligne avec ‘pref’ permet d’indiquer qu’il y a des réglages dans les préférences utilisateur, normalement sur l’onglet «&nbsp;Mes options&nbsp;» (le #user-options sert à ça) et que le premier élément concernant le plugin a un identifiant égal à id.</p>


<p>Vous pouvez, et même devez, ne préciser que les lignes qui sont pertinentes.</p>


<p>Il n’est pas obligatoire de préciser l’id, dans ce cas il suffit de préciser simplement l’onglet. Il n’est pas non plus obligatoire de préciser l’onglet, dans ce cas laisser simplement une chaine vide (”).</p>


<p>Les liens seront affichés dans l’ordre où ils sont définis dans la propriété ‘settings’.</p>


<p>Nota&nbsp;: À cette liste de lien sera ajoutée en premier, s’il existe, le lien vers le fichier _config.php du plugin.</p>


<h5>Exemples de définitions</h5>


<p>Plugin Antispam</p>

<pre>
'settings' =&gt; array(
    'self' =&gt; '',
    'blog' =&gt; '#params.antispam_params'
)
</pre>

<ul>
<li>self → accès aux réglages principaux du plugin sur sa propre page (index.php)</li>
<li>blog → accès aux réglages secondaires dans les paramètres du blog</li>
</ul>

<p>Plugin Mot-clés</p>

<pre>
'settings' =&gt; array(
    'pref' =&gt; '#user-options.tags_prefs'
)
</pre>

<ul>
<li>pref → accès au réglage du format de liste des mot-clés dans les préférences utilisateur</li>
</ul>

<p>Plugin Maintenance</p>

<pre>
'settings' =&gt; array(
    'self' =&gt; '#settings'
)
</pre>

<ul>
<li>self → accès à l’onglet “Réglages” de la propre page du plugin (index.php)</li>
</ul>

<h4>Affichage</h4>


<p>L’affichage des URLs de réglage se font à deux endroits&nbsp;:</p>


<p>Sur la page de gestion des plugins, en dépliant les infos supplémentaires (il suffit de cliquer sur le nom du plugin pour les obtenir)</p>


<p>Sur chacune des pages principales des plugins, à condition d’avoir les droits pour y accéder aux différents réglages, sachant que ce qui est définit pour ‘self’ ne sera pas affiché (a priori on y est déjà).</p>


<hr />


<p>Si vous avez besoin de plus d'information sur ces développements techniques, utilisez <a href="https://forum.dotclear.org/">le forum</a> et/ou <a href="http://ml.dotclear.org/listinfo/dev">la mailing-list de développement</a>, voire même le canal IRC #dotclear (irc.freenode.net) où certains d'entre nous traînent parfois…</p>";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2016-12-28T10:00:00+01:00";s:2:"TS";i:1482915600;}i:14;O:8:"stdClass":8:{s:4:"link";s:60:"https://fr.dotclear.org/blog/post/2016/11/02/Dotclear-2.10.4";s:5:"title";s:15:"Dotclear 2.10.4";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:2153:"    <p>Une mise à jour qui corrige un problème de connexion à la base de données avec les installations utilisant <strong>PostgreSQL inférieur à 9.1</strong></p>


<p>Si vous n'êtes <strong>pas</strong> dans ce cas, la mise à jour automatique fonctionnera comme d'habitude.</p>


<p>Si <strong>vous êtes dans ce cas</strong>, pour pouvoir faire la mise à jour automatique, suivez la procédure suivante&nbsp;:</p>

<ol>
<li>Ouvrez le fichier /inc/libs/clearbricks/dblayer/class.pgsql.php</li>
<li>Insérez une ligne devant la ligne 103 et insérer sur cette nouvelle ligne le code suivant et sauvegardez&nbsp;:</li>
</ol>
<pre>
return;
</pre>


<p>Vous devriez avoir quelque chose comme ça&nbsp;:</p>

<pre>
		/** @ignore */
		private function db_post_connect($handle,$database)
		{
return;
			$result = $this-&gt;db_query($handle,&quot;SELECT * FROM pg_collation WHERE (collcollate LIKE '%.utf8')&quot;);
			if($this-&gt;db_num_rows($result) &gt; 0) {
				$this-&gt;db_result_seek($result, 0);
				$row = $this-&gt;db_fetch_assoc($result);
				$this-&gt;utf8_unicode_ci = '&quot;'.$row['collname'].'&quot;';
			}
		}
</pre>


<p>Cette modification vous redonnera accès à votre installation.</p>


<p>Pour la mise à jour automatique, qui détectera cette modification, il faudra installer au préalable un plugin qui permet de passer outre l'avertissement. Ce plugin, FakeMeUp, est <a href="http://plugins.dotaddict.org/dc2/details/fakemeup">disponible sur DotAddict</a>.</p>


<p>Une fois ce plugin installé, vous pourrez faire la mise à jour, puis une fois celle-ci terminée, le désactiver ou le désinstaller.</p>


<p>La proposition de mise à jour de votre installation devrait apparaître sur votre tableau de bord aujourd'hui ou demain (selon les réglages de votre hébergement) et un <a href="http://download.dotclear.org/patches/2.10.3-2.10.4.diff.gz">patch</a> est disponible pour les développeurs préférant appliquer cette méthode.</p>


<hr />


<p>Le CHANGELOG de cette version&nbsp;:</p>

<pre>
Dotclear 2.10.4 - 2016-11-02
===========================================================
* PostgreSQL &lt; 9.1 fix
</pre>";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2016-11-02T10:45:00+01:00";s:2:"TS";i:1478079900;}i:15;O:8:"stdClass":8:{s:4:"link";s:60:"https://fr.dotclear.org/blog/post/2016/11/01/Dotclear-2.10.3";s:5:"title";s:15:"Dotclear 2.10.3";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:1374:"    <p>Une petite mise à jour qui corrige principalement deux failles de sécurité légères et qui devrait permettre un fonctionnement plus souple avec certaines configurations de serveur utilisant un proxy.</p>


<p>La proposition de mise à jour de votre installation devrait apparaître sur votre tableau de bord aujourd'hui ou demain (selon les réglages de votre hébergement) et un <a href="http://download.dotclear.org/patches/2.10.2-2.10.3.diff.gz">patch</a> est disponible pour les développeurs préférant appliquer cette méthode.</p>


<hr />


<p>Le CHANGELOG de cette version&nbsp;:</p>

<pre>
Dotclear 2.10.3 - 2016-11-01
===========================================================
* Security: Fix CVE-2016-7903: Password Reset Address Spoof — Thank's Hongkun Zeng for report
* Security: Fix CVE-2016-7902: Media Manager, unrestricted File Upload — Thank's Hongkun Zeng for report
* CSP: Cope with external sources used in editor's iframe to preview public external content
* Fix: Cope with post.post_position field during flat import
* Fix: Prevents precondition failed during currently activated theme update
* Fix: Remove unecessary header (cope by dotclear) in page plugin
* Fix: Let some proxies playing with standard http and https ports
* Fix: Let SSL runs through a proxy, it may be ok, sometimes
* 🐛 → Various bugs and typos fixed
</pre>";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2016-11-01T15:20:00+01:00";s:2:"TS";i:1478010000;}i:16;O:8:"stdClass":8:{s:4:"link";s:60:"https://fr.dotclear.org/blog/post/2016/08/17/Dotclear-2.10.2";s:5:"title";s:15:"Dotclear 2.10.2";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:500:"    <p>Une petite mise à jour qui corrige un problème qui empêche la mise à jour avec les installations utilisant le système de base de données PostgreSQL.</p>


<p>La proposition de mise à jour de votre installation devrait apparaître sur votre tableau de bord aujourd'hui ou demain (selon les réglages de votre hébergement) et un <a href="http://download.dotclear.org/patches/2.10.1-2.10.2.diff.gz">patch</a> est disponible pour les développeurs préférant appliquer cette méthode.</p>";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2016-08-17T10:22:00+02:00";s:2:"TS";i:1471422120;}i:17;O:8:"stdClass":8:{s:4:"link";s:60:"https://fr.dotclear.org/blog/post/2016/08/15/Dotclear-2.10.1";s:5:"title";s:15:"Dotclear 2.10.1";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:659:"    <p>Une petite mise à jour qui corrige un problème qui empêche l'affichage correct de l'administration pour les nouvelles installations (les mises à jour ne sont pas concernées), une application un peu trop stricte des CSP (Content-Security-Policies) en est la cause, signe que cette protection est efficace&nbsp;!</p>


<p>La proposition de mise à jour de votre installation devrait apparaître sur votre tableau de bord aujourd'hui ou demain (selon les réglages de votre hébergement) et un <a href="http://download.dotclear.org/patches/2.10-2.10.1.diff.gz">patch</a> est disponible pour les développeurs préférant appliquer cette méthode.</p>";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2016-08-15T09:15:00+02:00";s:2:"TS";i:1471245300;}i:18;O:8:"stdClass":8:{s:4:"link";s:76:"https://fr.dotclear.org/blog/post/2016/08/14/Dotclear-2.10-%3A-attention-%21";s:5:"title";s:27:"Dotclear 2.10 : attention !";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:662:"    <p>On vient de me signaler un problème qui empêche les feuilles de style CSS et les scripts Javascript d'être chargées dans l'administration de Dotclear, mais <strong>uniquement</strong> pour les <strong>nouvelles installations</strong>.</p>


<p>Si vous êtes confrontés à ce problème, téléchargez plutôt une <a href="https://download.dotclear.org/attic/dotclear-2.9.1.zip">version 2.9.1</a>, installez-là, puis faites ensuite la mise à jour proposée sur le tableau de bord, cette dernière n'étant pas concernée par ce problème.</p>


<p>Vous pouvez aussi attendre demain que je sorte une version 2.10.1 de Dotclear qui réglera ce bug.</p>";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2016-08-14T10:35:00+02:00";s:2:"TS";i:1471163700;}i:19;O:8:"stdClass":8:{s:4:"link";s:58:"https://fr.dotclear.org/blog/post/2016/08/13/Dotclear-2.10";s:5:"title";s:13:"Dotclear 2.10";s:7:"creator";s:6:"Franck";s:11:"description";s:0:"";s:7:"content";s:7573:"    <p>Il ne fallait pas manquer l'occasion de sortir une version pour le 13e anniversaire de Dotclear  et donc voilà, la 2.10 est disponible dès maintenant et très rapidement sur votre tableau de bord<sup>[<a href="https://fr.dotclear.org/blog/post/2016/08/13/Dotclear-2.10#pnote-1044-1" id="rev-pnote-1044-1">1</a>]</sup>&nbsp;!</p>


<p>Au menu (liste non exhaustive, voyez le <a href="https://hg.dotclear.org/dotclear/file/18dc878c1178/CHANGELOG" hreflang="en">CHANGELOG</a> pour plus de détails)&nbsp;:</p>

<ul>
<li>Quelques vulnérabilités corrigées</li>
<li>Pas mal de bugs éradiqués</li>
<li>Un nouveau jeu de template nommé <strong>dotty</strong> utilisant autant que faire se peut les nouvelles balises sémantiques HTML5</li>
<li>De nouvelles options pour personnaliser et utiliser un peu plus facilement votre administration (dossiers favoris pour la médiathèque, colonnes optionnelles pour les listes de pages et de billets, …)</li>
<li>La mise en place des <a href="https://developer.mozilla.org/fr/docs/S%C3%A9curit%C3%A9/CSP">Content-Security-Policies</a> pour l'administration, prélude à une implémentation côté blogs pour la future version 2.11<sup>[<a href="https://fr.dotclear.org/blog/post/2016/08/13/Dotclear-2.10#pnote-1044-2" id="rev-pnote-1044-2">2</a>]</sup></li>
<li>De nouvelles facilités et possibilités pour les développeurs de plugins (elles sont détaillées ci-dessous)</li>
<li>Des mises à jour des librairies Javascript utilisées (CKEditor, Codemirror, …)</li>
</ul>

<p>Pas de révolution donc, mais des évolutions pour une application plus sécurisée et plus robuste&nbsp;; pour finir, <strong>joyeux anniversaire Dotclear \o/</strong></p>


<p>PS&nbsp;: Cette version nécessite PHP 5.3 a minima, mais je ne saurais trop vous conseiller de passer à PHP 5.6 voire PHP 7 sans attendre — cette dernière offre un gain de vitesse très appréciable. Il est très possible que la version suivante de Dotclear nécessite une version plus récente que la déjà obsolète 5.3.</p>


<hr />


<p>Quelques détails techniques pour les développeurs de plugins (et de thèmes) et les administrateurs de blog&nbsp;:</p>


<h3>CSP, aka Content-Security-Policies</h3>


<blockquote><p>Content Security Policy (abrégé CSP) est un mécanisme de sécurité permettant de restreindre l'origine du contenu (tel qu'un script Javascript, une feuille de style etc.) dans une page web à certains sites autorisés. Cela permet de mieux se prémunir d'une éventuelle faille XSS.</p></blockquote>


<p>[ Wikipedia «&nbsp;<a href="https://fr.wikipedia.org/wiki/Content_Security_Policy">Content Security Policy</a>&nbsp;» ]</p>


<p>Les paramètres utilisés (activation et directives) sont accessibles via le module <strong>about:config</strong> du menu <strong>Réglages système</strong>. Voir la partie «&nbsp;system », les paramètres concernés étant les suivants&nbsp;:</p>

<ul>
<li>csp_admin_on&nbsp;: activation/désactivation</li>
<li>csp_admin_default&nbsp;: directive CSP <strong>default-src</strong></li>
<li>csp_admin_img&nbsp;: directive CSP <strong>img-src</strong></li>
<li>csp_admin_script&nbsp;: directive CSP <strong>script-src</strong></li>
<li>csp_admin_style&nbsp;: directive CSP <strong>style-src</strong></li>
</ul>

<p>Un plugin tiers devant utiliser les services d'un serveur externe peut compléter tout ou partie de ces directives à l'aide du <em>behavior</em> <strong>adminPageHTTPHeaderCSP</strong> qui fournit en argument un tableau à clé, Chacune des clés correspond à une des directives CSP, sa valeur fournissant la liste des éléments (séparés par des espaces) de la directive.</p>


<p>Exemple&nbsp;:</p>


<p>Si un plugin utilise côté administration l'API Google Maps (pour les scripts), il peut ajouter le serveur correspondant de cette façon&nbsp;:</p>

<pre>
$core-&gt;addBehavior('adminPageHTTPHeaderCSP',array('myAdminBehaviors','adminPageHTTPHeaderCSP'));

class myAdminBehaviors
{
	public static function adminPageHTMLHead($csp)
	{
		if (isset($csp['script-src'])) {
			$csp['script-src'] .= ' maps.googleapis.com';
		} else {
			$csp['script-src'] = 'maps.googleapis.com';
		}
	}
}
</pre>


<h3>Répertoire privé <strong>/var</strong></h3>


<p>Un nouveau répertoire, nommé <strong>var</strong> fait son apparition avec la 2.10. Il est situé à la racine et devrait être utilisé pour le stockage d'éléments n'ayant rien à faire dans la médiathèque ou dans le répertoire de cache (qui peut être supprimé à n'importe quel moment sans remettre en question le fonctionnement de Dotclear).</p>


<p>Une constante, <strong>DC_VAR</strong>, est disponible automatiquement et peut être personnalisée dans le fichier <strong>config.php</strong> pour construire des chemins d'accès. Deux fonctions sont également disponibles pour récupérer des URLs&nbsp;:</p>

<ul>
<li>dcPage::getVF() pour une URL basée sur l'URL d'administration du blog</li>
<li>dcBlog::getVF() pour une URL publique basée sur l'URL du blog</li>
</ul>

<p>Les développeurs de plugin sont fortement encouragés à créer leur propre répertoire au sein de ce répertoire <strong>/var</strong> afin de conserver un semblant d'ordre.</p>


<h3>Coloration syntaxique via Codemirror</h3>


<p>La librairie Codemirror utilisée par l'éditeur de thème est désormais utilisable (côté administration) par n'importe quel plugin. Deux fonctions sont disponibles pour le chargement de la librairie et pour son exécution&nbsp;:</p>

<ul>
<li>dcPage::jsLoadCodeMirror() pour le chargement</li>
<li>dcPage::jsRunCodeMirror() pour l'exécution</li>
</ul>

<p>Exemple pour du code CSS&nbsp;:</p>

<pre>
# Get interface setting
$core-&gt;auth-&gt;user_prefs-&gt;addWorkspace('interface');
$user_ui_colorsyntax = $core-&gt;auth-&gt;user_prefs-&gt;interface-&gt;colorsyntax;
$user_ui_colorsyntax_theme = $core-&gt;auth-&gt;user_prefs-&gt;interface-&gt;colorsyntax_theme;

# in &lt;head&gt;
if ($user_ui_colorsyntax) {
	echo dcPage::jsLoadCodeMirror($user_ui_colorsyntax_theme,false,array('css'));
}

# in &lt;body&gt;
if ($user_ui_colorsyntax) {
	echo dcPage::jsRunCodeMirror('editor_css','css_content','css',$user_ui_colorsyntax_theme);
}
</pre>


<p>L'activation de la coloration syntaxique et le choix du thème à utiliser (parmi les quarante et plus proposés) se font dans «&nbsp;Mes préférences », onglet «&nbsp;Mes options ».</p>


<hr />


<p>Si vous avez besoin de plus d'information sur ces développements techniques, utilisez <a href="https://forum.dotclear.org/">le forum</a> et/ou <a href="http://ml.dotclear.org/listinfo/dev">la mailing-list de développement</a>, voire même le canal IRC #dotclear (irc.freenode.net) où certains d'entre nous traînent parfois…</p>
<div class="footnotes"><h4 class="footnotes-title">Notes</h4>
<p>[<a href="https://fr.dotclear.org/blog/post/2016/08/13/Dotclear-2.10#rev-pnote-1044-1" id="pnote-1044-1">1</a>] <a href="http://download.dotclear.org/patches/2.9.1-2.10.diff.gz">Un patch</a> est également disponible pour ceux qui préfèrent cette méthode pour appliquer la mise à jour.</p>
<p>[<a href="https://fr.dotclear.org/blog/post/2016/08/13/Dotclear-2.10#rev-pnote-1044-2" id="pnote-1044-2">2</a>] La mise en place des CSP est consécutive à une conférence de <a href="http://www.nicolas-hoffmann.net/content-security-policy-parisweb-2015/#/">Nicolas Hoffmann</a> à ce sujet, à <a href="https://www.paris-web.fr/2015/conferences/csp-content-security-policy.php">Paris-Web en 2015</a>, à laquelle j'ai assisté.</p></div>
";s:7:"subject";a:1:{i:0;s:4:"News";}s:7:"pubdate";s:25:"2016-08-13T13:13:00+02:00";s:2:"TS";i:1471086780;}}}